{% extends 'base.html' %}
{% block title %}AI Assistant Result - AI Course Management{% endblock %}
{% block content %}
  <div class="page-header ai-header">
    <div class="ai-icon">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2"></path>
      </svg>
    </div>
    <h1 class="page-title">AI Assistant</h1>
    <p class="page-subtitle">{{ title }}</p>
  </div>
  
  <div class="content-container ai-result-container">
    <div class="ai-response-card">
      <div class="ai-response-header">
        <div class="ai-badge">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
          </svg>
          AI Generated Response
        </div>
      </div>
      
      <div class="ai-content">
        <p style="white-space: pre-wrap; line-height: 1.8; margin: 0;">{{ content }}</p>
      </div>
    </div>
    
    {% if resources %}
    <div class="resources-card">
      <h3 class="section-title">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
          <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
        </svg>
        Additional Resources
      </h3>
      <div class="resources-grid">
        {% for r in resources %}
        <a href="{{ r.url }}" target="_blank" class="resource-item">
          <div class="resource-icon">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
              <polyline points="15 3 21 3 21 9"></polyline>
              <line x1="10" y1="14" x2="21" y2="3"></line>
            </svg>
          </div>
          <div class="resource-content">
            <h4 class="resource-title">{{ r.title }}</h4>
            <p class="resource-url">{{ r.url }}</p>
          </div>
        </a>
        {% endfor %}
      </div>
    </div>
    {% endif %}
    
    <div class="ai-actions">
      <a class="btn-primary-custom" href="{{ url_for('dashboard') }}">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="19" y1="12" x2="5" y2="12"></line>
          <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
        Back to Dashboard
      </a>
      <button class="btn-secondary-custom" onclick="window.print()">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="6 9 6 2 18 2 18 9"></polyline>
          <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
          <rect x="6" y="14" width="12" height="8"></rect>
        </svg>
        Print Response
      </button>
    </div>
  </div>
  
  <style>
    .ai-header {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .ai-icon {
      width: 80px;
      height: 80px;
      border-radius: var(--radius-xl);
      background: var(--gradient-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      margin-bottom: var(--space-lg);
      box-shadow: 0 0 40px rgba(6, 182, 212, 0.4);
    }
    
    .ai-result-container {
      max-width: 900px;
    }
    
    .ai-response-card {
      background: var(--gradient-card);
      border: 1px solid var(--border-light);
      border-radius: var(--radius-xl);
      overflow: hidden;
      margin-bottom: var(--space-xl);
    }
    
    .ai-response-header {
      padding: var(--space-md) var(--space-xl);
      border-bottom: 1px solid var(--border-subtle);
      background: var(--bg-secondary);
    }
    
    .ai-badge {
      display: inline-flex;
      align-items: center;
      gap: var(--space-sm);
      background: var(--gradient-primary);
      color: white;
      padding: var(--space-xs) var(--space-md);
      border-radius: var(--radius-full);
      font-size: 0.8rem;
      font-weight: 600;
    }
    
    .ai-content {
      padding: var(--space-xl);
      color: var(--text-primary);
      font-size: 1rem;
      position: relative;
    }
    
    .ai-content::before {
      content: '';
      position: absolute;
      left: 0;
      top: var(--space-xl);
      bottom: var(--space-xl);
      width: 4px;
      background: var(--gradient-primary);
      border-radius: var(--radius-full);
    }
    
    .resources-card {
      background: var(--gradient-card);
      border: 1px solid var(--border-light);
      border-radius: var(--radius-xl);
      padding: var(--space-xl);
      margin-bottom: var(--space-xl);
    }
    
    .section-title {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      margin-bottom: var(--space-lg);
    }
    
    .section-title::before {
      display: none;
    }
    
    .section-title svg {
      color: var(--primary);
    }
    
    .resources-grid {
      display: grid;
      gap: var(--space-md);
    }
    
    .resource-item {
      display: flex;
      align-items: center;
      gap: var(--space-md);
      padding: var(--space-md);
      background: var(--bg-secondary);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      text-decoration: none;
      transition: var(--transition-base);
    }
    
    .resource-item:hover {
      background: var(--bg-tertiary);
      border-color: var(--primary);
      transform: translateX(4px);
    }
    
    .resource-icon {
      width: 44px;
      height: 44px;
      background: var(--bg-tertiary);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary);
      flex-shrink: 0;
    }
    
    .resource-content {
      flex: 1;
      overflow: hidden;
    }
    
    .resource-title {
      font-size: 0.95rem;
      font-weight: 600;
      color: var(--text-primary);
      margin: 0 0 var(--space-xs) 0;
    }
    
    .resource-url {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin: 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .ai-actions {
      display: flex;
      gap: var(--space-md);
      flex-wrap: wrap;
    }
    
    @media print {
      .ai-actions,
      .navbar-custom { 
        display: none !important; 
      }
      
      body {
        background: white;
        color: black;
      }
      
      .ai-content {
        border: 1px solid #ddd;
        padding: 20px;
      }
    }
  </style>
{% endblock %}
